#	CAMINHO NO XML	CAMPO	REGRAS DE NEGÓCIO PARA A NOTA FISCAL DE SERVIÇO ELETRÔNICA DO  SISTEMA NACIONAL NFS-e						NÍVEL DA REGRA	EMISSORES PÚBLICOS NACIONAIS NFS-e (SEFIN, WEB, APP)		ADN NFS-e		OBSERVAÇÕES DE NEGÓCIO
			Nível 1 - Regras de negócio para consistência do Leiaute NFS-e  Nível 2 - Regras de Negócio gerais para todos os municípios aderentes ao SN NFS-e  Nível 3 - Regras de Negócio específicas conforme legislação municipal do município parametrizada no SN NFS-e 							RNs EXECUTADAS NA RECEPÇÃO DE DPS EVIADAS PELOS EMITENTES (V), RNs EXECUTADAS NA GERAÇÃO DAS INFORMAÇÕES DE NFS-e PELOS EMISSORES PÚBLICOS NACIONAIS (V) E RNs NÃO EXECUTADAS (X)	NFS-e EMITIDA SOB CONDIÇÕES DE  DECISÃO JUDICIAL OU ADMINISTRATIVA (cStat = 102) RNs EXECUTADAS NA GERAÇÃO DE NFS-e PELOS EMISSORES PÚBLICOS NACIONAIS (SEFIN, WEB, APP) RNs EXECUTADAS (V) RNs NÃO EXECUTADAS (X)	RNs EXECUTADAS  NA RECEPÇÃO DE NFS-e COMPARTILHADAS  PELOS MUNICÍPIOS COM O  ADN NFS-e (V)  E RNs NÃO EXECUTADAS (X)	NFS-e EMITIDAS SOB CONDIÇÕES DE DECISÃO JUDICIAL OU ADMINISTRATIVA (cStat = 102) RNs EXECUTADAS  NA RECEPÇÃO DE NFS-e COMPARTILHADAS  PELOS MUNICÍPIOS COM O  ADN NFS-e (V) E RNs NÃO EXECUTADAS (X)	
			REGRAS DE NEGÓCIO		APLIC.	EFEITO	CÓD. ERRO	MSG. ERRO						
1	-	NFS-e	-		-	-	-	-	-	-	-	-	-	-
2	NFSe/	versao	Prazo de aceitação da versão do leiaute NFS-e ultrapassado.		Obrig.	Rej.	E1260	O prazo de aceitação da versão do leiaute da NFS-e expirou.	1	V	V	V	V	-
3	NFSe/	infNFSe	-		-	-	-	-	-	-	-	-	-	-
4	NFSe/infNFSe/	id	O identificador da NFS-e é formado conforme a concatenação dos seguintes campos: "NFS" + Cód.Mun. (7) + Amb.Ger. (1) + Tipo de Inscrição Federal (1) + Inscrição Federal (14 - CPF completar com 000 à esquerda) + nNFSe (13) + AnoMes Emis. (4) + Cód.Num. (9) + DV (1)  Verificar se tipo de inscrição e inscrição, informados no identificador da NFS-e, estão corretamente correspondidos conforme o seguinte:  Tipo de inscrição Federal = 1 / Inscrição Federal = CPF emitente da NFS-e; Tipo de inscrição Federal = 2 / Inscrição Federal = CNPJ emitente da NFS-e;  Cód.Mun.Emi. é o código do município do endereço do emitente da NFS-e."		Obrig.	Rej.	E1263	Conteúdo informado no identificador da NFS-e difere da concatenação dos campos correspondentes que formam o identificador.	1	V	V	V	V	-
5			Chave a acesso da NFS-e enviada já existe no ADN.		Obrig.	Rej.	E1268	Chave de acesso informada para a NFS-e já foi compartilhada com o ADN.	1	V	V	V	V	-
6	NFSe/infNFSe/	xLocEmi	-		-	-	-	-	-	-	-	-	-	-
7	NFSe/infNFSe/	xLocPrestacao	-		-	-	-	-	-	-	-	-	-	-
8	NFSe/infNFSe/	nNFSe	-		-	-	-	-	-	-	-	-	-	-
9	NFSe/infNFSe/	cLocIncid	Não é permitido informar o código do local de incidência quando o serviço prestado for imune, exportação de serviço ou não incidência do ISSQN sobre o serviço prestado, ou seja, o campo referente à tributação do ISSQN (tribISSQN) é igual a "2 - Imunidade, "3 - Exportação de Serviço" ou "4 - Não Incidência", (tribISSQN = 2, 3 ou 4).		Obrig.	Rej.	E1301	Não é permitido informar o código do local de incidência quando o campo referente à tributação do ISSQN indicar imunidade, exportação ou não incidência.	1	V	X	V	X	-
10			É obrigatório informar o código do local de incidência quando o serviço prestado for uma operação tributável, ou seja, o campo referente à tributação do ISSQN (tribISSQN) é igual a "1 - Operação Tributável", (tribISSQN = 1).		Obrig.	Rej.	E1305	É obrigatório informar  o código do local de incidência quando o campo referente à tributação do ISSQN indicar Operação Tributável.	1	V	V	V	V	-
11			Se o código da localidade de incidência for informado na NFS-e, então ele deve existir nas tabelas de municípios do IBGE ou tabela de concessões de rodovia ou  tabela de localidade geral do arquivo  ANEXO_A-MUNICIPIO_IBGE-PAISES_ISO2-SNNFSe.		Obrig.	Rej.	E1309	O código do local de incidência do ISSQN não existe conforme a tabela de municípios IBGE ou tabela de concessões de rodovia ou tabela de localidade geral no ANEXO_A-MUNICIPIO_IBGE-PAISES_ISO2-SNNFSe.	1	V	V	V	V	-
12			Se o código de tributação nacional (cTribNac) corresponder a um subitem diferente de 200101 e  o local da prestação do serviço (cLocPrestacao) "Águas Marítmas" (código 0000000),  então o local de incidência (cLocIncid) deve ser igual ao código do município do endereço do prestador do serviço  (NFSe/infNFSe/DPS/infDPS/prest/end/endNac/cMun).		Obrig.	Rej.	E1313	A localidade de incidência para o ISSQN deve corresponder ao município do estabelecimento/domicílio do prestador do serviço, quando não for informado o código de tributação nacional (cTribNac) 200101, da lista nacional de serviços do Sistema Nacional NFS-e, e a localidade de prestação do serviço corresponder a "Águas Marítimas" (0000000).	2	V	X	V	X	-
13			Se o código de tributação nacional informado corresponder a um dos seguintes códigos:  030501, 070201, 070202, 070401, 070501, 070502, 070901, 070902, 071001, 071002, 071101, 071102, 071201, 071601, 071701, 071801, 071901, 110101, 110102, 110201, 110301, 110401, 110402, 120101, 120201, 120301, 120401, 120501, 120601, 120701, 120801, 120901, 120902, 120903, 121001, 121101, 121201, 121401, 121501, 121601, 121701, 160102, 160103, 160104, 160201, 171001, 171002,  então o codigo da localidade de  incidência do ISSQN deve ser igual ao código do local de prestação do serviço informado na NFS-e depelo município.  Exceto para os casos de Imunidade, Exportação de Serviço e Não Incidência (tribISSQN = 2, 3 ou 4).		Obrig.	Rej.	E1317	O local de incidência do ISSQN deve ser igual ao município da prestação do serviço (NFSe/infNFSe/DPS/infDPS/serv/locPrest/cLocPrestacao)  do serviço informado na NFS-e compartilhada pelo município, quando informado qualquer código de tributação nacional cuja regra de incidência indique o local da prestação, conforme a tabela MUN.INCID_INFO.SERV. do ANEXO_I-SEFIN_ADN-DPS_NFSe-SNNFSe.	2	V	X	V	X	-
14			Se o código de tributação nacional informado corresponder a um dos seguintes códigos:  170501,  então o codigo do local de incidência do ISSQN deve ser igual ao código do município do endereço do tomador  (NFSe/infNFSe/DPS/infDPS/toma/end/endNac/cMun)   do serviço informado na NFS-e compartilhada pelo município.		Obrig.	Rej.	E1321	O local de incidência do ISSQN deve ser igual ao município do endereço do tomador do serviço informado na NFS-e compartilhada pelo município (NFSe/infNFSe/DPS/infDPS/toma/end/endNac/cMun).	2	V	X	V	X	-
15			Excetuados os códigos de tributação nacional: 030501, 070201, 070202, 070401, 070501, 070502, 070901, 070902, 071001, 071002, 071101, 071102, 071201, 071601, 071701, 071801, 071901, 110101, 110102, 110201, 110301, 110401, 110402, 120101, 120201, 120301, 120401, 120501, 120601, 120701, 120801, 120901, 120902, 120903, 121001, 121101, 121201, 121401, 121501, 121601, 121701, 160102, 160103, 160104, 160201, 171001, 171002, 170501 e 990101, para os demais códigos de tributação, de acordo com a tabela MUN.INCID_INFO.SERV. do ANEXO_I-SEFIN_ADN-DPS_NFSe-SNNFSe,  o codigo da localidade de incidência do ISSQN deve ser igual ao código do município do endereço do emitente da NFS-e (NFSe/infNFSe/emit/endNac/cMun),  quanto o emitente for o prestador do serviço (tpEmit = 1),  ou código do município do endereço do prestador do serviço da DPS (NFSe/infNFSe/DPS/infDPS/prest/end/endNac/cMun), quando o emitente da NFS-e for o tomador ou intermediário (tpEmit = 2 ou 3).		Obrig.	Rej.	E1325	O local de incidência do ISSQN deve ser igual ao município do endereço do prestador (NFSe/infNFSe/DPS/infDPS/prest/end/endNac/cMun) do serviço informado na NFS-e compartilhada pelo município, quando informado qualquer código de tributação nacional cuja regra de incidência indique o município do estabelecimento do prestador, conforme a tabela MUN.INCID_INFO.SERV. do ANEXO_I-SEFIN_ADN-DPS_NFSe-SNNFSe.	2	V	X	V	X	-
16	NFSe/infNFSe/	xLocIncid	-		-	-	-	-	-	-	-	-	-	-
17	NFSe/infNFSe/	xTribNac	-		-	-	-	-	-	-	-	-	-	-
18	NFSe/infNFSe/	xTribMun	-		-	-	-	-	-	-	-	-	-	-
19	NFSe/infNFSe/	xNBS	-		-	-	-	-	-	-	-	-	-	-
20	NFSe/infNFSe/	verAplic	-		-	-	-	-	-	-	-	-	-	-
21	NFSe/infNFSe/	ambGer	Verificar se o ambiente gerador da NFS-e está de acordo com a definição: 1- Sistema Próprio do Município, para as NFS-e compartilhadas pelo município para o ADN, ou 2 - Sefin Nacional NFS-e, para as NFS-e emitidas pela Sefin ou recepcionadas via API "Bypass".		Obrig.	Rej.	E1274	O ambiente gerador da NFS-e não está de acordo com a definição 1 (Sistema Próprio do Município) ou 2 (Sefin Nacional).	1	V	V	V	V	-
22	NFSe/infNFSe/	tpEmis	-		-	-	-	-	-	-	-	-	-	-
23	NFSe/infNFSe/	procEmi	Os emissores públicos nacionais devem gerar a NFS-e informando qual o processo de emissão:  1 - Emissão com aplicativo do contribuinte (via Web Service); 2 - Emissão com aplicativo disponibilizado pelo fisco (Web); 3 - Emissão com aplicativo disponibilizado pelo fisco (App);  Verificar se a NFS-e compartilhada pelo município preencheu alguma informação para o processo de emissão.  Este campo não deve ser informado em NFS-e compartilhada com o ADN NFS-e.		Obrig.	Rej.	E1276	A informação do processo de emissão de NFS-e é exclusiva para notas emitidas pela Sefin Nacional NFS-e. O município não deve informar este campo nas NFS-e compartilhadas com o ADN NFS-e.	1	V	V	V	V	-
24	NFSe/infNFSe/	cStat	-		-	-	-	-	-	-	-	-	-	-
25	NFSe/infNFSe/	dhProc	A data e hora do processamento (geração) da NFS-e deve ser anterior ou igual à data e hora da sua recepção pelo Sistema Nacional NFS-e.		Obrig.	Rej.	E1278	A data e hora do processamento (geração) da NFS-e deve ser anterior ou igual à data da recepção pelo Sistema Nacional NFS-e.	1	V	V	V	V	-
26	NFSe/infNFSe/	nDFe	-		-	-	-	-	-	-	-	-	-	-
27	NFSe/infNFSe/	emit	-		-	-	-	-	-		-		-	-
28	NFSe/infNFSe/emit/	CNPJ	Verificar se o CNPJ informado para o emitente da NFS-e é válido (verificar DV).		Obrig.	Rej.	E1280	CNPJ informado para o emitente da NFS-e é inválido (verificar DV).	1	V	V	V	V	-
29			Verificar se o CNPJ do emitente corresponde ao CNPJ informado para prestador ou tomador ou intermediário, conforme o valor do campo tpEmit informado na DPS. tpemit = 1 - Prestador, tpemit = 2 - Tomador, tpemit = 3 - Intermediário,		Obrig.	Rej.	E1282	O CNPJ do emitente não corresponde ao CNPJ do informado conforme o tipo de emitente informado na DPS.	1	V	V	V	V	
30			Verificar se CNPJ é MEI na data de Competência.		Obrig.	Rej.	E1281	CNPJ não é MEI na data de competência informada.	2	V	X	V	X	-
31	NFSe/infNFSe/emit/	CPF	Verificar se o CPF informado para o emitente da NFS-e é válido (verificar DV).		Obrig.	Rej.	E1284	CPF informado para o emitente da NFS-e é inválido (verificar DV).	1	V	V	V	V	-
32			Verificar se o CPF do emitente corresponde ao CPF informado para prestador ou tomador ou intermediário, conforme o valor do campo tpEmit informado na DPS. tpemit = 1 - Prestador, tpemit = 2 - Tomador, tpemit = 3 - Intermediário,		Obrig.	Rej.	E1285	O CPF do emitente não corresponde ao CPF do informado conforme o tipo de emitente informado na DPS.	1	V	V	V	V	
33	NFSe/infNFSe/emit/	IM	-		-	-	-	-	-	-	-	-	-	-
34	NFSe/infNFSe/emit/	xNome	-		-	-	-	-	-	-	-	-	-	-
35	NFSe/infNFSe/emit/	xFant	-		-	-	-	-	-	-	-	-	-	-
36	NFSe/infNFSe/emit/	enderNac	-		-	-	-	-	-		-		-	-
37	NFSe/infNFSe/emit/enderNac/	xLgr	-		-	-	-	-	-	-	-	-	-	-
38	NFSe/infNFSe/emit/enderNac/	nro	-		-	-	-	-	-	-	-	-	-	-
39	NFSe/infNFSe/emit/enderNac/	xCpl	-		-	-	-	-	-	-	-	-	-	-
40	NFSe/infNFSe/emit/enderNac/	xBairro	-		-	-	-	-	-	-	-	-	-	-
41	NFSe/infNFSe/emit/enderNac/	cMun	Verificar se o código do município do emitente da NFS-e corresponde ao código do município emissor (cLocEmi) informado na NFS-e.		Obrig.	Rej.	E1286	O código do município do emitente da NFS-e difere do código do municipio emissor informado na NFS-e.	1	V	V	V	V	-
42	NFSe/infNFSe/emit/enderNac/	UF	-		-	-	-	-	-	-	-	-	-	-
43	NFSe/infNFSe/emit/enderNac/	CEP	-		-	-	-	-	-	-	-	-	-	-
44	NFSe/infNFSe/emit/	fone	-		-	-	-	-	-	-	-	-	-	-
45	NFSe/infNFSe/emit/	email	-		-	-	-	-	-	-	-	-	-	-
46	NFSe/infNFSe/	valores	Exceto para o campo vLiq, não é permitido informar os demais campos do grupo valores quando o prestador é optante do simples nacional do tipo MEI (opSimpNac = 2).		Obrig.	Rej.	E1302	Exceto para o campo vLiq, não é permitido informar os demais campos do grupo valores para prestador de serviço optante do simples nacional do tipo MEI.	1	V	X	V	X	
			Exceto para o campo vLiq, não é permitido informar os demais campos do grupo valores quando o serviço prestado for imune, exportação de serviço ou não incidência do ISSQN sobre o serviço prestado, ou seja, o campo referente à tributação do ISSQN (tribISSQN) é igual a "2 - Imunidade, "3 - Exportação de Serviço" ou "4 - Não Incidência", (tribISSQN = 2, 3 ou 4).		Obrig.	Rej.	E1303	Exceto para o campo vLiq, não é permitido informar os demais campos do grupo valores quando o campo referente à tributação do ISSQN indicar imunidade, exportação ou não incidência.	1	V	X	V	X	
			Exceto para o campo vLiq, não é permitido informar os demais campos do grupo valores quando o prestador de serviço tiver um regime especial de tributação, ou seja, o campo que indica o regime especial de tributação é diferente de 0, (regEspTrib = 1, 2, 3, 4, 5 ou 6).		Obrig.	Rej.	E1307	Exceto para o campo vLiq, não é permitido informar os demais campos do grupo valores quando o prestador de serviço possui algum regime especial de tributação.	1	V	X	V	X	
			Exceto para o campo vLiq, não é permitido informar os demais campos do grupo valores quando estiver indicado na DPS que a tributação do ISSQN está com sua exigibilidade suspensa, seja administrativamente ou judicialmente, ou seja, o campo que indica a suspensão da exigibilidade está informado na DPS (tpSUSP = 1 ou 2).		Obrig.	Rej.	E1311	Exceto para o campo vLiq, não é permitido informar os demais campos do grupo valores quando a exigibilidade da tributação do ISSQN estiver suspensa por decisão judicial ou administrativa.	1	V	X	V	X	
47	NFSe/infNFSe/valores/	vCalcDR	vCalcDR é o valor monetário calculado a partir do percentual de dedução/redução da BC do ISSQN, informado pelo emitente no campo pDR da DPS. Este percentual é calculado sobre valor do serviço informado na DPS e o resultado calculado é o valor deste campo do leiaute NFS-e ou a soma dos valores de dedução/redução da BC do ISSQN, quando um ou mais documentos são informados nos campos vDeducaoReducao pelo emitente na DPS. Neste caso, o resultado do somatório é o valor deste campo do leiaute NFS-e.		Obrig.	Rej.	E1287	O valor calculado de dedução/redução não corresponde aos valores de (valor do serviço x percentual de dedução/redução), quando pDR é informado na DPS ou ao somatório dos valores do campo vDeducaoReducao, quando um ou mais documentos são informados para dedução/redução da base de cálculo do ISSQN.	1	V	X	V	X	-
48	NFSe/infNFSe/valores/	tpBM	-		-	-	-	-	-	-	-	-	-	-
49	NFSe/infNFSe/valores/	vCalcBM	vCalcBM é o valor mmonetário calculado a partir do percentual  de BM, que foi informada no campo pRedBCBM da DPS. Neste caso o percentual é aplicado sobre o valor do serviço informado na DPS e o resultado calculado é o valor deste campo do leiaute NFS-e.		Obrig.	Rej.	E1288	O valor calculado do percentual de reduçãõ da base de cálculo por Benefício Municipal não corresponde aos valores de (valor do serviço x percentual de benefício municipal), quando pRedBCBM é informado na DPS.	1	V	X	V	X	-
50	NFSe/infNFSe/valores/	vBC	O valor da base de cálculo do ISSQN (vBC) é calculado a partir de valores informados na NFS-e:  Valor da BC = Valor do serviço - Desconto incondicionado - Valores monetário de Dedução Redução - Valor monetário de Benerfício Municipal.  vBC = vServ - vDescIncond - (vDR ou vDeducaoReducao ou vCalcDR) - (vRedBCBM ou vCalcBM)		Obrig.	Rej.	E1295	O valor da base cálculo deve ser igual ao valor do serviço menos desconto incondicionado e, valores monetários de dedução/redução e benefício municipal, informados na NFS-e.	1	V	X	V	X	-
51			O valor BC calculado não pode estar reduzida de forma que resulte para valor do ISSQN a uma alíquota efetiva menor que 2%, exceto para os códigos relativos aos serviços 7.02, 7.05 e 16.01.		Obrig.	Rej.	E1297	O valor BC calculado não pode estar reduzida de forma que resulte para valor do ISSQN a uma alíquota efetiva menor que 2%, exceto para os códigos relativos aos serviços 7.02, 7.05 e 16.01.	2	V	X	V	X	
52	NFSe/infNFSe/valores/	pAliqAplic	Não é permitido informar alíquota aplicada superior a 5%.		Obrig.	Rej.	E1300	Não é permitido informar alíquota aplicada superior a 5%.	1	V	X	V	X	-
53	NFSe/infNFSe/valores/	vISSQN	O valor do ISSQN informado na NFS-e (vISSQN) deve ser igual ao produto da base de cálculo pela alíquota aplicada (vBC x pAliqAPlic).		Obrig.	Rej.	E1289	O produto do valor da base de cálculo pela alíquota aplicada, ambos informados na NFS-e compartilhada, não está de acordo com o resultado cálculado pelo sistema (vBC x pAliAplic).	1	V	X	V	X	-
54	NFSe/infNFSe/valores/	vTotalRet	-		-	-	-	-	-	-	-	-	-	-
55	NFSe/infNFSe/valores/	vLiq	O valor líquido da NFS-e não pode ser inferior a zero.  O valor líquido da NFS-e é calculado a partir de valores que constam na DPS através do seguinte cálculo:  Valor líquido = Valor do serviço - Desconto condicionado - Desconto incondicionado - Valores retidos (CP, IRRF, CSLL) -  Valores (ISSQN, PIS, COFINS), se retidos. 		Obrig.	Rej.	E1508	O valor líquido da NFS-e não pode ser inferior a zero.	1	V	X	V	X	-
56	NFSe/infNFSe/	xOutInf	-		-	-	-	-	-	-	-	-	-	-
